# Платежный бот в Telegram

## Обзор
Бот для Telegram с поддержкой платежей, созданный с использованием библиотеки Telegraf. Бот обрабатывает платежи в Telegram Stars (XTR) за предоставление доступа.

## Технологический стек
- **Среда выполнения**: Node.js 20
- **Язык**: TypeScript
- **Фреймворк**: Telegraf (API бота Telegram)
- **Инструмент сборки**: tsx (выполнение TypeScript)

## Структура проекта
```
├── server/
│ ├── index.ts # Точка входа - инициализирует бота
│ └── bot.ts # Логика бота с обработкой платежей
├── package.json # Зависимости и скрипты
└── tsconfig.json # Конфигурация TypeScript
```

## Переменные окружения
- `TELEGRAM_BOT_TOKEN` - Обязательный. Ваш токен для Telegram-бота от @BotFather

## Запуск бота
- Разработка: `npm run dev`
- Проверка типов: `npm run check`

## Функции бота
- Команда `/start` - Отправляет счет на 100 XTR (звезд Telegram)
- Обработка запросов перед оформлением заказа
- Подтверждение успешной оплаты

# Инструкция по деплою на Render

## 1. Подготовка репозитория
Убедитесь, что ваш код запушен в GitHub.

## 2. Создание сервиса на Render
1. Зайдите в [Render Dashboard](https://dashboard.render.com/).
2. Нажмите **New** -> **Web Service**.
3. Подключите свой GitHub репозиторий.

## 3. Настройка параметров
- **Runtime**: `Node`
- **Build Command**: `npm install && npm run build`
- **Start Command**: `npm start`
- **Instance Type**: `Free` (или любой другой)

## 4. Переменные окружения (Environment Variables)
В разделе **Environment** добавьте следующую переменную:
- `TELEGRAM_BOT_TOKEN`: (Ваш токен от @BotFather)

## 5. Особенности для Free тира
Если вы используете Web Service на бесплатном тарифе Render, он "засыпает" после 15 минут бездействия. Однако для Telegram бота (long polling) это обычно не критично, так как бот сам держит соединение. Если вам нужно, чтобы он не засыпал, можно использовать [Cron-job.org](https://cron-job.org/) для пинга URL сервиса (если вы добавите HTTP сервер).

В текущем коде бот использует `telegraf.launch()`, что идеально подходит для Render.